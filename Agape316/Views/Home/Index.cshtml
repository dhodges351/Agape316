@using Microsoft.AspNetCore.Identity
@inject SignInManager<Agape316.Data.ApplicationUser> SignInManager
@inject UserManager<Agape316.Data.ApplicationUser> UserManager
@model Agape316.Models.HomeIndexModel

@{
    var userId = string.Empty;
}

@if (SignInManager.IsSignedIn(User))
{
    <input type="hidden" id="logged" value="true" />
    userId = Context.Session.GetString("UserInfo");
}
else
{
    <input type="hidden" id="logged" value="false" />
}
@if (User.IsInRole("Admin"))
{
    <input type="hidden" id="admin" value="true" />
}
else
{
    <input type="hidden" id="admin" value="false" />
}

@{
    ViewData["Title"] = "Home Page";
}

<div class="container-fluid  bg-dark text-light py-5">
   <div class="container-fluid  welcome-container">
        <div class="row align-items-center g-5">
            <div class="col-lg-6 text-center text-lg-start">
                <h1 class="display-3 text-white animated slideInLeft">Welcome to Our<br>Ministry!</h1>
                <p class="text-white animated slideInLeft mb-4 pb-2">
                    The [Ministry Name] mission is to show God's love to those who enter our doors, 
                    whether as a leader, a member, or a guest. Using our self-service website
                    you can: Create an Event, Create a Meal Schedule, Create a Delivery Schedule,
                    or sign up to Bring a Dish.
                </p>
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Select an Action
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#" onclick="showPlanEventModal()">Plan Event</a>
                        <a class="dropdown-item" href="#" onclick="showEventDishModal()">Bring a Dish</a>
                        <a class="dropdown-item" href="#" onclick="showScheduleMealsModal()">Schedule Meals</a>
                        <a class="dropdown-item" href="#" onclick="showDeliverMealsModal()">Deliver Meals</a>                        
                    </div>
                </div>
            </div>
            <div class="col-lg-6 text-center text-lg-end overflow-hidden">                        
                <img class="img-fluid mt-4" src="img/agapeevents.jpg" alt="events">
            </div>
        </div>
    </div>    
</div>

<div class="container-fluid py-5 text-center contrast-background">
    <a id="previously-saved"></a>
    <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
        <h5 class="section-title ff-secondary text-center text-primary fw-normal mb-4">Previously Saved</h5>
        <h1 class="mb-5">View Details</h1>
    </div>    
    @await Component.InvokeAsync("PreviouslySaved")
    <partial name="_EventPartial" />
    <partial name="_EventDishPartial" />
    <partial name="_MealSchedulePartial" />
    <partial name="_MealDeliveryPartial" />
</div>

<div class="container-fluid py-5">
    <div class="row">
        <div class="col-md-12"> 
           <a id="team-members"></a>
           <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
                <h5 class="section-title ff-secondary text-center text-primary fw-normal">[Ministry Name]</h5>
                <h1 class="mb-5">Our Caring Team Members</h1>
                <div class="container-fluid">                
                    <div class="row g-4">
                        <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                            <div class="team-item text-center rounded overflow-hidden">
                                <div class="rounded-circle overflow-hidden m-4">
                                    <img class="img-fluid" src="img/users/team-1.jpg" alt="">
                                </div>
                                <h5 class="mb-0">Full Name</h5>
                                <small>Designation</small>
                                <div class="d-flex justify-content-center mt-3">
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-twitter"></i></a>
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-instagram"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                            <div class="team-item text-center rounded overflow-hidden">
                                <div class="rounded-circle overflow-hidden m-4">
                                    <img class="img-fluid" src="img/users/team-2.jpg" alt="">
                                </div>
                                <h5 class="mb-0">Full Name</h5>
                                <small>Designation</small>
                                <div class="d-flex justify-content-center mt-3">
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-twitter"></i></a>
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-instagram"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                            <div class="team-item text-center rounded overflow-hidden">
                                <div class="rounded-circle overflow-hidden m-4">
                                    <img class="img-fluid" src="img/users/team-3.jpg" alt="">
                                </div>
                                <h5 class="mb-0">Full Name</h5>
                                <small>Designation</small>
                                <div class="d-flex justify-content-center mt-3">
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-twitter"></i></a>
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-instagram"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.7s">
                            <div class="team-item text-center rounded overflow-hidden">
                                <div class="rounded-circle overflow-hidden m-4">
                                    <img class="img-fluid" src="img/users/team-4.jpg" alt="">
                                </div>
                                <h5 class="mb-0">Full Name</h5>
                                <small>Designation</small>
                                <div class="d-flex justify-content-center mt-3">
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-twitter"></i></a>
                                    <a class="btn btn-square btn-primary mx-1" href=""><i class="fab fa-instagram"></i></a>
                                </div>
                            </div>
                        </div>  
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    
<div class="container-fluid py-5 contrast-background">
    <a id="about-us"></a>
    <div class="container">
        <div class="row g-5 align-items-center">
            <div class="col-lg-6">
                <div class="row g-3">
                    <div class="col-6 text-start">
                        <img class="img-fluid rounded w-100 wow zoomIn" data-wow-delay="0.1s" src="img/about-3.jpg">
                    </div>
                    <div class="col-6 text-end">
                        <img class="img-fluid rounded w-100 wow zoomIn" data-wow-delay="0.3s" src="img/about2.JPEG">
                    </div>
                    <div class="col-6 text-start">
                        <img class="img-fluid rounded w-100 wow zoomIn" data-wow-delay="0.5s" src="img/about-4.jpg">
                    </div>
                    <div class="col-6 text-end">
                        <img class="img-fluid rounded w-100 wow zoomIn" data-wow-delay="0.7s" src="img/about4.jpg">
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <h5 class="section-title ff-secondary text-start text-primary fw-normal">About Us</h5>
                <h1 class="mb-4">[Ministry Name]</h1>
                <p class="mb-4">Our aim is to serve the members of [Church Name] and people in surrounding communities.</p>
                <p class="mb-4">We welcome new members and hope you will visit us at [Church Name] soon!</p>                
                <a class="btn btn-primary py-3 px-5 mt-2" href="#" onclick="showReadMoreModal()">Read More</a>
                <div class="modal fade" id="readMoreModal" tabindex="-1" aria-labelledby="readMoreModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content rounded-0 readMoreModalContent">
                            <div class="modal-header eventModalHeader">
                                <h5 class="modal-title" id="readMoreModalLabel">About [Church Name]</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">                                
                                <p>Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos erat ipsum et lorem et sit, sed stet lorem sit.
                                Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos erat ipsum et lorem et sit, sed stet lorem sit.
                                Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos erat ipsum et lorem et sit, sed stet lorem sit.
                                Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos erat ipsum et lorem et sit, sed stet lorem sit.
                                Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos erat ipsum et lorem et sit, sed stet lorem sit.
                                Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos erat ipsum et lorem et sit, sed stet lorem sit.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid  py-5">
    <a id="contact-us"></a>
    <div class="container">
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
            <h5 class="section-title ff-secondary text-center text-primary fw-normal">Contact Us</h5>
            <h1 class="mb-5">We'd Love to Hear From You!</h1>
        </div>
        <div class="row g-4">
            <div class="col-12">
                <div class="row gy-4">
                    <div class="col-md-4">
                        <h5 class="section-title ff-secondary fw-normal text-start text-primary">Planning/Scheduling</h5>
                        <p><i class="fa fa-envelope-open text-primary me-2"></i><a href="mailto:yourchurch@gmail.com">yourchurch@gmail.com</a></p>
                    </div>
                    <div class="col-md-4">
                        <h5 class="section-title ff-secondary fw-normal text-start text-primary">General</h5>
                        <p><i class="fa fa-envelope-open text-primary me-2"></i><a href="mailto:yourchurch@gmail.com">yourchurch@gmail.com</a></p>
                    </div>
                    <div class="col-md-4">
                        <h5 class="section-title ff-secondary fw-normal text-start text-primary">Technical</h5>
                        <p><i class="fa fa-envelope-open text-primary me-2"></i><a href="mailto:technicalsupport@gmail.com">technicalsupport@gmail.com</a></p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 wow fadeIn" data-wow-delay="0.1s">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d51921.46466975783!2d-89.30303552753828!3d35.576132302110324!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x887edc61d9074173%3A0xb0be2562a6ffec5d!2sBrownsville%2C%20TN%2038012!5e0!3m2!1sen!2sus!4v1699839982486!5m2!1sen!2sus" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <div class="col-md-6">
                <div class="wow fadeInUp" data-wow-delay="0.2s">
                    <form asp-controller="Home" asp-action="ContactUs" method="post">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="form-floating">                                   
                                    <input asp-for="Name" class="form-control" placeholder="Your Name" />
                                    <label for="Name">Your Name</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">                                    
                                    <input asp-for="Email" type="email" class="form-control" placeholder="Your Name" />
                                    <label for="Email">Your Email</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating">                                    
                                    <input asp-for="Subject" class="form-control" placeholder="Subject" />
                                    <label for="Subject">Subject</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating">
                                    <textarea class="form-control" placeholder="Leave a message here" asp-for="Message" rows="5"></textarea>
                                    <label for="Message">Message</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <button class="btn btn-primary w-100 py-3" type="submit">Send Message</button>
                            </div>
                        </div>
                        <input type="hidden" asp-for="UserId" class="form-control" placeholder="Subject" value="@userId" />
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
 
<div class="modal fade" id="planEventModal" tabindex="-1" aria-labelledby="planEventModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content rounded-0 eventModalContent">
            <div class="modal-header eventModalHeader">
                <h5 class="modal-title" id="planEventModalLabel">Plan Event</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">                
                @await Component.InvokeAsync("Event")  
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="eventDishModal" tabindex="-1" aria-labelledby="eventDishModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content rounded-0 eventModalContent">
            <div class="modal-header eventModalHeader">
                <h5 class="modal-title" id="eventDishModalLabel">Bring a Dish</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                @await Component.InvokeAsync("EventDish")                 
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="scheduleMealsModal" tabindex="-1" aria-labelledby="scheduleMealsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content rounded-0 scheduleMealsModalContent">
            <div class="modal-header eventModalHeader">
                <h5 class="modal-title" id="scheduleMealsModalLabel">Schedule Meals</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                @await Component.InvokeAsync("MealSchedule")
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="deliverMealsModal" tabindex="-1" aria-labelledby="deliverMealsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content rounded-0 deliverMealsModalContent">
            <div class="modal-header eventModalHeader">
                <h5 class="modal-title" id="deliverMealsModalLabel">Deliver Meals</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                @await Component.InvokeAsync("MealDelivery")
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="recipientInfoModal" tabindex="-1" aria-labelledby="recipientInfoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content rounded-0 recipientInfoModalContent">
            <div class="modal-header eventModalHeader">
                <h5 class="modal-title" id="recipientInfoModalLabel">Recipient Info</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">                
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Full Name: </label>
                            <label id="recipientFullName"></label>                        
                        </div>
                        <div class="form-group">
                            <label>Address: </label>
                            <label id="recipientAddress">Recipient Address</label>                          
                        </div>                       
                        <div class="form-group">
                            <label>Food Allergies: </label>
                            <label id="recipientFoodAllergies"></label>                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var isLoggedIn = false;
    var isAdmin = false;   

    function checkEntry()
    {                
        var searchVal = $("#txtSearch").val();
        if (searchVal == "")
        {
            return false;
        }
        else {
            $("#homeSearchForm").submit;
        }
    }

    function clearThis(target) {
        target.value = "";
        $("#divSearchResults").hide();
    }

    function checkLoggedIn() {
        var signed = $('#logged').val();

        if (signed === 'true') {
            isLoggedIn = true;            
        }        
    }

    function checkAdmin() {
        var admin = $('#admin').val();

        if (admin === 'true') {
            isAdmin = true;
        }
    }

    function showPlanEventModal()
    {        
        checkLoggedIn();
        //checkAdmin();

        if (!isLoggedIn) {
            alert('You must be an logged in to use this feature.')
        }        
        else
        {
            $("#planEventModal").modal("show");
        }        
    }

    function showEventDishModal() {
        checkLoggedIn();
        //checkAdmin();

        if (!isLoggedIn) {
            alert('You must be an logged in to use this feature.')
        }        
        else
        {
            $("#eventDishModal").modal("show");
        }        
    }    

    function showReadMoreModal() {
        $("#readMoreModal").modal("show");        
    }

    function showScheduleMealsModal() {    
        checkLoggedIn();

        if (!isLoggedIn) {
            alert('You must be an logged in to use this feature.')
        }        
        else {
            $("#scheduleMealsModal").modal("show");
        }
    }    

    function showDeliverMealsModal() {       
        checkLoggedIn();
        if (!isLoggedIn) {
            alert('You must be an logged in to use this feature.')
        }        
        else
        {
            $("#deliverMealsModal").modal("show");  
        }        
    }
    

</script>
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
